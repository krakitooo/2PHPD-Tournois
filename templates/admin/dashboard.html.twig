{% extends 'base.html.twig' %}

{% block title %}Tableau de bord Admin{% endblock %}

{% block stylesheets %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
{% endblock %}

{% block javascripts %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}

{% block body %}
<div class="container py-5">
  <h1 class="mb-4 text-center text-danger"><i class="bi bi-shield-lock-fill"></i> Interface d’administration</h1>

  <div class="row g-4">
    <!-- Utilisateurs -->
    <div class="col-lg-3">
      <div class="card border-secondary shadow-sm">
        <div class="card-header bg-secondary text-white fw-bold">
          👤 Utilisateurs
        </div>
        <div class="card-body">
          <p><strong>Total :</strong> {{ users|length }}</p>
          <ul class="list-group list-group-flush">
            {% for user in users|slice(0, 5) %}
              <li class="list-group-item">{{ user.username }} - {{ user.status }}</li>
            {% endfor %}
          </ul>
        </div>
      </div>
    </div>

    <!-- Tournois -->
    <div class="col-lg-3">
      <div class="card border-info shadow-sm">
        <div class="card-header bg-info text-white fw-bold">
          🏆 Tournois
        </div>
        <div class="card-body">
          <p><strong>Total :</strong> {{ tournaments|length }}</p>
          <ul class="list-group list-group-flush">
            {% for t in tournaments|slice(0, 5) %}
              <li class="list-group-item">{{ t.tournamentName }}</li>
            {% endfor %}
          </ul>
        </div>
      </div>
    </div>

    <!-- Inscriptions -->
    <div class="col-lg-3">
      <div class="card border-warning shadow-sm">
        <div class="card-header bg-warning text-dark fw-bold">
          📝 Inscriptions
        </div>
        <div class="card-body">
          <p><strong>Total :</strong> {{ registrations|length }}</p>
          <ul class="list-group list-group-flush">
            {% for r in registrations|slice(0, 5) %}
              <li class="list-group-item">
                {{ r.player.username }} → {{ r.tournament.tournamentName }}
              </li>
            {% endfor %}
          </ul>
        </div>
      </div>
    </div>

    <!-- Matchs -->
    <div class="col-lg-3">
      <div class="card border-danger shadow-sm">
        <div class="card-header bg-danger text-white fw-bold">
          🎮 Matchs
        </div>
        <div class="card-body">
          <p><strong>Total :</strong> {{ matches|length }}</p>
          <ul class="list-group list-group-flush">
            {% for m in matches|slice(0, 5) %}
              <li class="list-group-item">
                {{ m.player1.username }} vs {{ m.player2.username }} ({{ m.status }})
              </li>
            {% endfor %}
          </ul>
        </div>
      </div>
    </div>
  </div>

  <hr class="my-5">

  <p class="text-muted text-center">Connecté en tant que <strong>{{ user.username }}</strong> (admin)</p>
</div>
{% endblock %}
